# Docker

## Docker가 무엇일까?

도커(Docker)는 컨테이너 기반의 가상화 플랫폼으로, 애플리케이션을 **격리된 환경(컨테이너)**에서 실행할 수 있도록 도와주는 도구입니다.  
컨테이너를 사용하면 애플리케이션과 그 실행 환경(라이브러리, 의존성 등)을 하나의 패키지로 묶어 일관된 환경에서 실행할 수 있습니다.  
전통적인 가상 머신(VM)과 달리 운영체제(OS) 커널을 공유하면서도 독립적인 실행 환경을 제공합니다.  

<br>

도커의 주요 특징은 아래와 같습니다.  

- 경량성: VM보다 적은 리소스로 빠르게 실행 가능
- 이식성: 한 번 빌드하면 어디서든 실행 가능
- 확장성: 여러 컨테이너를 조합하여 마이크로서비스 아키텍처 구축 가능
- 격리성: 각 컨테이너는 독립적으로 실행되며 다른 컨테이너와 격리됨
- 자동화: CI/CD 파이프라인에서 코드 배포 자동화 가능

<br>
<br>

## Docker 주요 용어

- 이미지(Image): 컨테이너 실행을 위한 템플릿. OS, 라이브러리, 애플리케이션 등을 포함
- 컨테이너(Container): 이미지를 실행한 인스턴스. 가벼운 가상 환경
- 도커파일(Dockerfile): 도커 이미지를 만들기 위한 설정 파일
- 도커 허브(Docker Hub): 공개 및 개인 도커 이미지를 저장하는 레포지토리
- 볼륨(Volume): 컨테이너의 데이터를 영구적으로 저장하는 방법
- 네트워크(Network): 컨테이너 간 통신을 위한 네트워크 설정
- 도커 컴포즈(Docker Compose): 여러 개의 컨테이너를 정의하고 관리하는 도구 (docker-compose.yml 사용)

<br>
<br>

## Docker 사용방법

1. 도커 설치  
: 도커는 Windows, macOS, Linux에서 사용할 수 있으며, 공식 홈페이지([Docker](https://www.docker.com/))에서 다운로드할 수 있습니다.  

<br>

2. 도커 주요 명령어  
| 명령어 | 설명 |
|--------|------|
| `docker pull <이미지>` | 도커 허브에서 컨테이너 이미지를 다운로드 |
| `docker push <이미지>` | 도커 허브에 컨테이너 이미지를 업로드 |
| `docker run <이미지>` | 컨테이너 실행 |
| `docker ps` | 실행 중인 컨테이너 목록 조회 |
| `docker stop <컨테이너 ID>` | 실행 중인 컨테이너 중지 |
| `docker rm <컨테이너 ID>` | 컨테이너 삭제 |
| `docker images` | 로컬에 저장된 이미지 목록 조회 |
| `docker rmi <이미지 ID>` | 이미지 삭제 |
| `docker exec -it <컨테이너 ID> bash` | 실행 중인 컨테이너 내부에 접속 |

<br>

도커 이미지를 내려받고 실행하는 방법은 아래와 같습니다.
새로운 컨테이너를 실행하는데 백그라운드(Detached mode)에서 실행하고 호스트의 포트(8080) → 컨테이너 내부의 포트(80)로 연결합니다.

```
docker pull nginx  # nginx 이미지 다운로드
docker run -d -p 8080:80 nginx  # 컨테이너 실행
```

<br>

3. 도커파일(Dockerfile) 작성 후 빌드 및 실행  
도커(Docker)를 사용하면 기본 제공 이미지(예: nginx, mysql)를 바로 실행할 수 있습니다. 하지만, 실무에서는 보통 우리만의 애플리케이션 코드(예: 웹 서버, 백엔드 API)를 포함한 커스텀 도커 이미지를 만들어야 합니다. 이를 위해 Dockerfile을 작성하고 빌드 후 실행하는 과정이 필요합니다.  

<br>

Node.js 애플리케이션을 컨테이너에서 실행한다고 가정한 코드입니다.

```
# 1️⃣ Node.js 18 버전의 공식 이미지를 기반으로 사용
FROM node:18

# 2️⃣ 컨테이너 내부 작업 디렉토리 설정
WORKDIR /app

# 3️⃣ 로컬 파일을 컨테이너 내부로 복사
COPY . .

# 4️⃣ 의존성 설치
RUN npm install

# 5️⃣ 컨테이너가 실행될 때 실행할 명령어
CMD ["node", "server.js"]
```

<br>

이렇게 하면 개발자가 직접 Node.js 설치할 필요 없고 어디서 실행하든 동일한 환경 보장하며 배포(CI/CD) 자동화가 가능합니다.
